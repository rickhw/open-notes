é€™è£¡æ˜¯ä¸€å€‹å®Œæ•´çš„ç¯„ä¾‹ï¼Œè®“ä½ å¯ä»¥åœ¨ **MacBook ä¸Šé€é Docker Compose** è·‘ [n8n](https://n8n.io/)ï¼Œä¸¦æä¾›ä¸€å€‹ç°¡å–®çš„ **Webhook to Email** ç¯„ä¾‹æ‡‰ç”¨æµç¨‹ã€‚

---

## âœ… ç¬¬ä¸€æ­¥ï¼šå»ºç«‹ `docker-compose.yml`

```yaml
version: "3.1"

services:
  n8n:
    image: n8nio/n8n:latest
    container_name: n8n
    restart: always
    ports:
      - "5678:5678"
    environment:
      - N8N_BASIC_AUTH_ACTIVE=true
      - N8N_BASIC_AUTH_USER=admin
      - N8N_BASIC_AUTH_PASSWORD=admin123
      - N8N_HOST=localhost
      - N8N_PORT=5678
      - WEBHOOK_URL=http://localhost:5678
    volumes:
      - ./n8n_data:/home/node/.n8n
```

> ğŸ” é è¨­å¸³å¯†æ˜¯ `admin / admin123`ï¼Œä½ å¯è‡ªè¨‚ã€‚

---

## âœ… ç¬¬äºŒæ­¥ï¼šå•Ÿå‹• n8n

```bash
docker-compose up -d
```

å•Ÿå‹•å¾Œï¼Œç€è¦½å™¨é–‹å•Ÿï¼š[http://localhost:5678](http://localhost:5678)

---

## âœ… ç¬¬ä¸‰æ­¥ï¼šå»ºç«‹ä¸€å€‹ç°¡å–®çš„æ‡‰ç”¨æ¡ˆä¾‹ (Webhook + Email)

### ğŸ§ª ä½¿ç”¨æƒ…å¢ƒ

ç•¶å¤–éƒ¨ POST ä¸€ç­† JSON åˆ° webhook æ™‚ï¼Œn8n æœƒè§£æè³‡æ–™ï¼Œä¸¦å¯„å‡ºä¸€å° Emailã€‚

### æ­¥é©Ÿå¦‚ä¸‹ï¼š

1. ç™»å…¥ n8nã€‚

2. é»é¸ `+ New Workflow`ã€‚

3. æ‹–æ›³ä»¥ä¸‹å…©å€‹ç¯€é»åˆ°ç•«å¸ƒï¼š

   * **Webhook (Trigger)**
     è¨­å®šï¼š

     * HTTP Method: `POST`
     * Path: `send-email`
     * Response Mode: `On Received`
     * Save & Activate workflow å¾Œï¼Œn8n æœƒçµ¦ä½ ä¸€å€‹ URLï¼Œä¾‹å¦‚ï¼š

       ```
       http://localhost:5678/webhook/send-email
       ```

   * **Email (Node)**
     è¨­å®šï¼š

     * SMTP Host: `smtp.gmail.com`ï¼ˆæˆ–ä½ çš„ SMTPï¼‰
     * Port: `587`
     * User: `your-email@gmail.com`
     * Password: `app password`ï¼ˆå»ºè­°ä½¿ç”¨ Gmail App Passwordï¼‰
     * From Email: `your-email@gmail.com`
     * To Email: `your-email@gmail.com`
     * Subject: `New message from webhook`
     * Text: `Received payload: {{$json["message"]}}`

4. ç”¨ç·šé€£æ¥ Webhook â†’ Emailã€‚

5. é»é¸ `Activate` å•Ÿç”¨å·¥ä½œæµã€‚

---

## âœ… ç¬¬å››æ­¥ï¼šæ¸¬è©¦ Webhook

ç”¨ `curl` ç™¼é€æ¸¬è©¦è«‹æ±‚ï¼š

```bash
curl -X POST http://localhost:5678/webhook/send-email \
  -H "Content-Type: application/json" \
  -d '{"message": "Hello from webhook"}'
```

ä½ æ‡‰è©²æœƒæ”¶åˆ°ä¸€å° Emailï¼Œå…§å®¹ç‚ºï¼š

```
Received payload: Hello from webhook
```

---

## ğŸ“‚ æª”æ¡ˆçµæ§‹

```
your-folder/
â”œâ”€â”€ docker-compose.yml
â””â”€â”€ n8n_data/         <-- n8n æœƒè‡ªå‹•å»ºç«‹é€™å€‹ç›®éŒ„å„²å­˜å·¥ä½œæµç¨‹è³‡æ–™
```

---

å¦‚æœä½ å¸Œæœ›æˆ‘å¹«ä½ ç”¢å‡ºé€™å€‹ workflow çš„ JSONï¼Œè®“ä½ å¯ä»¥ç”¨åŒ¯å…¥æ–¹å¼åŠ å¿«æµç¨‹ï¼Œè«‹å‘Šè¨´æˆ‘ï¼

